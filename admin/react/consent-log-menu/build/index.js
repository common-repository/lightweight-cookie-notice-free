(()=>{"use strict";var e={338:(e,t,n)=>{var a=n(795);t.H=a.createRoot,a.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};const n=window.React;var a=function n(a){var l=t[a];if(void 0!==l)return l.exports;var c=t[a]={exports:{}};return e[a](c,c.exports,n),c.exports}(338);const l=wp.element.useMemo,c="...",r=(e,t)=>{let n=t-e+1;return Array.from({length:n},((t,n)=>n+e))};var i;function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o.apply(null,arguments)}var s,d=function(e){return n.createElement("svg",o({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=n.createElement("path",{d:"m18 17-5-5 5-5m-7 10-5-5 5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},m.apply(null,arguments)}var g,u=function(e){return n.createElement("svg",m({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=n.createElement("path",{d:"m15 18-6-6 6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function h(){return h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},h.apply(null,arguments)}var b,f=function(e){return n.createElement("svg",h({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),g||(g=n.createElement("path",{d:"m9 18 6-6-6-6",stroke:"#0783BE",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},w.apply(null,arguments)}var E=function(e){return n.createElement("svg",w({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),b||(b=n.createElement("path",{d:"m6 17 5-5-5-5m7 10 5-5-5-5",stroke:"#000",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})))};const p=e=>{const{onPageChange:t,totalCount:a,siblingCount:i=1,currentPage:o,pageSize:s}=e,m=(({totalCount:e,pageSize:t,siblingCount:n=1,currentPage:a})=>l((()=>{const l=Math.ceil(e/t);if(n+5>=l)return r(1,l);const i=Math.max(a-n,1),o=Math.min(a+n,l),s=i>2,d=o<l-2,m=l;if(!s&&d)return[...r(1,3+2*n),c,l];if(s&&!d){let e=r(l-(3+2*n)+1,l);return[1,c,...e]}if(s&&d){let e=r(i,o);return[1,c,...e,c,m]}}),[e,t,n,a]))({currentPage:o,totalCount:a,siblingCount:i,pageSize:s});if(0===o||m.length<2)return null;let g=m[m.length-1];return(0,n.createElement)("ul",{className:"pagination-container"},(0,n.createElement)("li",{className:"pagination-item "+(1===o?"disabled":""),onClick:()=>{t(1)},key:-2},(0,n.createElement)(d,null)),(0,n.createElement)("li",{className:"pagination-item "+(1===o?"disabled":""),onClick:()=>{1!==o&&t(o-1)},key:-1},(0,n.createElement)(u,null)),m.map((e=>e===c?(0,n.createElement)("li",{className:"pagination-item dots",key:crypto.randomUUID()},"…"):(0,n.createElement)("li",{key:e,className:"pagination-item "+(e===o?"selected":""),onClick:()=>t(e)},e))),(0,n.createElement)("li",{className:"pagination-item "+(o===g?"disabled":""),onClick:()=>{o!==g&&t(o+1)},key:g+1},(0,n.createElement)(f,null)),(0,n.createElement)("li",{className:"pagination-item "+(o===g?"disabled":""),onClick:()=>{t(g)},key:g+2},(0,n.createElement)(E,null)))},v=wp.element.useState,y=wp.element.useMemo,{__}=wp.i18n,_=e=>{const[t,a]=v(1),l=y((()=>{const n=10*(t-1),a=n+10;return e.data.slice(n,a)}),[t,e.data]);function c(t){return e.formData.sortingColumn===t?e.formData.sortingOrder:""}function r(e){const t=e.target.closest(".table-cell-abbreviated-content"),n=t.nextElementSibling;"block"===n.style.display?(n.style.display="none",t.style.display="block"):(n.style.display="block",t.style.display="none")}return(0,n.createElement)("div",{className:"daextlwcnf-data-table-container"},(0,n.createElement)("table",{className:"daextlwcnf-react-table__daextlwcnf-data-table daextlwcnf-react-table__daextlwcnf-data-table-dashboard-menu"},(0,n.createElement)("thead",null,(0,n.createElement)("tr",null,(0,n.createElement)("th",null,(0,n.createElement)("button",{className:"daextlwcnf-react-table__daextlwcnf-sorting-button",onClick:e.handleSortingChanges,value:"consent_id","data-icon":c("consent_id")},__("Consent ID","lightweight-cookie-notice-free"))),(0,n.createElement)("th",null,(0,n.createElement)("button",{className:"daextlwcnf-react-table__daextlwcnf-sorting-button",onClick:e.handleSortingChanges,value:"anonymized_user_ip","data-icon":c("anonymized_user_ip")},__("Anonymized User IP","lightweight-cookie-notice-free"))),(0,n.createElement)("th",null,(0,n.createElement)("button",{className:"daextlwcnf-react-table__daextlwcnf-sorting-button",onClick:e.handleSortingChanges,value:"country_code","data-icon":c("country_code")},__("Country","lightweight-cookie-notice-free"))),(0,n.createElement)("th",null,(0,n.createElement)("button",{className:"daextlwcnf-react-table__daextlwcnf-sorting-button",onClick:e.handleSortingChanges,value:"date","data-icon":c("date")},__("Date/Time ± 0","lightweight-cookie-notice-free"))),(0,n.createElement)("th",null,(0,n.createElement)("button",{className:"daextlwcnf-react-table__daextlwcnf-sorting-button",onClick:e.handleSortingChanges,value:"user_agent","data-icon":c("user_agent")},__("User Agent","lightweight-cookie-notice-free"))),(0,n.createElement)("th",null,(0,n.createElement)("button",{className:"daextlwcnf-react-table__daextlwcnf-sorting-button",onClick:e.handleSortingChanges,value:"url","data-icon":c("url")},__("URL","lightweight-cookie-notice-free"))),(0,n.createElement)("th",null,(0,n.createElement)("button",{className:"daextlwcnf-react-table__daextlwcnf-sorting-button",onClick:e.handleSortingChanges,value:"encrypted_key","data-icon":c("encrypted_key")},__("Encrypted Key","lightweight-cookie-notice-free"))),(0,n.createElement)("th",null,(0,n.createElement)("div",{className:"daextlwcnf-react-table__daextlwcnf-table-head-label"},"State")))),(0,n.createElement)("tbody",null,l.map((e=>(0,n.createElement)("tr",{key:e.consent_log_id},(0,n.createElement)("td",null,(0,n.createElement)("div",{className:"table-cell-abbreviated-content"},e.consent_id.substring(0,14)+" ... ",(0,n.createElement)("button",{className:"table-cell-expand-button daextlwcnf-btn daextlwcnf-btn-secondary",onClick:e=>r(e)},"+")),(0,n.createElement)("div",{className:"table-cell-full-content"},e.consent_id)),(0,n.createElement)("td",null,""!==e.anonymized_user_ip?e.anonymized_user_ip:__("N/A","lightweight-cookie-notice-free")),(0,n.createElement)("td",null,""!==e.country_code?e.country_code:__("N/A","lightweight-cookie-notice-free")),(0,n.createElement)("td",null,e.formatted_date),(0,n.createElement)("td",null,(0,n.createElement)("div",{className:"table-cell-abbreviated-content"},e.user_agent.substring(0,14)+" ... ",(0,n.createElement)("button",{className:"table-cell-expand-button daextlwcnf-btn daextlwcnf-btn-secondary",onClick:e=>r(e)},"+")),(0,n.createElement)("div",{className:"table-cell-full-content"},e.user_agent)),(0,n.createElement)("td",null,(0,n.createElement)("div",{className:"table-cell-abbreviated-content"},e.url.substring(0,14)+" ... ",(0,n.createElement)("button",{className:"table-cell-expand-button daextlwcnf-btn daextlwcnf-btn-secondary",onClick:e=>r(e)},"+")),(0,n.createElement)("div",{className:"table-cell-full-content"},e.url)),(0,n.createElement)("td",null,(0,n.createElement)("div",{className:"table-cell-abbreviated-content"},e.encrypted_key.substring(0,14)+" ... ",(0,n.createElement)("button",{className:"table-cell-expand-button daextlwcnf-btn daextlwcnf-btn-secondary",onClick:e=>r(e)},"+")),(0,n.createElement)("div",{className:"table-cell-full-content"},e.encrypted_key)),(0,n.createElement)("td",null,(0,n.createElement)("button",{className:"small-button",onClick:()=>function(e){((e,t)=>{const n=e,a=window.URL.createObjectURL(new Blob([n])),l=document.createElement("a");l.href=a;const c=t+".json";l.setAttribute("download",c),document.body.appendChild(l),l.click(),l.parentNode.removeChild(l)})(e.formatted_state,"consolidated-state-"+e.consent_log_id)}(e)},"Download"))))))),0===e.data.length&&(0,n.createElement)("div",{className:"daextlwcnf-no-data-found"},__("We couldn't find any results matching your filters. Try adjusting your criteria.","lightweight-cookie-notice-free")),e.data.length>0&&(0,n.createElement)("div",{className:"daextlwcnf-react-table__pagination-container"},(0,n.createElement)("div",{className:"daext-displaying-num"},e.data.length+" items"),(0,n.createElement)(p,{className:"pagination-bar",currentPage:t,totalCount:e.data.length,pageSize:10,onPageChange:e=>a(e)})))},N=e=>(0,n.createElement)("div",{className:"loading-screen"},(0,n.createElement)("div",{className:"loading-screen__wrapper"},(0,n.createElement)("div",{className:"loading-screen__content"},(0,n.createElement)("div",{className:"loading-screen__spinner-container"},(0,n.createElement)("div",{className:"loading-screen__spinner"})),(0,n.createElement)("div",{className:"loading-screen__text"},void 0!==e.dataUpdateRequired&&e.dataUpdateRequired?e.generatingDataMessage:e.loadingDataMessage)))),k=wp.element.useState,x=wp.element.useEffect,{__:C}=wp.i18n,{render:I}=wp.element,D=document.getElementById("react-root"),M=(0,n.createElement)((()=>{const[e,t]=k({optimizationStatus:0,searchString:"",searchStringChanged:!1,sortingColumn:"date",sortingOrder:"desc"}),[a,l]=k(!0),[c,r]=k(!1),[i,o]=k([]),[s,d]=k({allRecords:0,acceptanceRate:"N/A"});return x((()=>{l(!0),wp.apiFetch({path:"/lightweight-cookie-notice-free/v1/consent-log",method:"POST",data:{search_string:e.searchString,sorting_column:e.sortingColumn,sorting_order:e.sortingOrder,data_update_required:c}}).then((e=>{o(e.table),d({allRecords:e.statistics.all_records,acceptanceRate:e.statistics.acceptance_rate}),c&&(r(!1),t({searchString:"",searchStringChanged:!1,sortingColumn:"date",sortingOrder:"desc"})),l(!1)})).catch((e=>{l(!1),o([]),d({allRecords:0,acceptanceRate:"N/A"}),wp.apiFetch({path:"/lightweight-cookie-notice-free/v1/options",method:"POST",data:{daextlwcnf_max_displayed_consent_log_records:1e3}}).then((e=>{}))}))}),[e.searchStringChanged,e.sortingColumn,e.sortingOrder,c]),(0,n.createElement)(n.Fragment,null,(0,n.createElement)(React.StrictMode,null,a?(0,n.createElement)(N,{loadingDataMessage:C("Loading data...","lightweight-cookie-notice-free"),generatingDataMessage:C("Data is being generated. For large sites, this process may take several minutes. Please wait...","lightweight-cookie-notice-free"),dataUpdateRequired:c}):(0,n.createElement)("div",{className:"daextlwcnf-admin-body"},(0,n.createElement)("div",{className:"daextlwcnf-react-table"},(0,n.createElement)("div",{className:"daextlwcnf-react-table-header"},(0,n.createElement)("div",{className:"statistics"},(0,n.createElement)("div",{className:"statistic-label"},C("All records","lightweight-cookie-notice-free"),":"),(0,n.createElement)("div",{className:"statistic-value"},s.allRecords),(0,n.createElement)("div",{className:"statistic-label"},C("Acceptance Rate","lightweight-cookie-notice-free"),":"),(0,n.createElement)("div",{className:"statistic-value"},s.acceptanceRate)),(0,n.createElement)("div",{className:"tools-actions"},(0,n.createElement)("button",{onClick:e=>{r((e=>!e))}},(0,n.createElement)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTIyIDEwQzIyIDEwIDE5Ljk5NSA3LjI2ODIyIDE4LjM2NjIgNS42MzgyNEMxNi43MzczIDQuMDA4MjcgMTQuNDg2NCAzIDEyIDNDNy4wMjk0NCAzIDMgNy4wMjk0NCAzIDEyQzMgMTYuOTcwNiA3LjAyOTQ0IDIxIDEyIDIxQzE2LjEwMzEgMjEgMTkuNTY0OSAxOC4yNTQzIDIwLjY0ODIgMTQuNU0yMiAxMFY0TTIyIDEwSDE2IiBzdHJva2U9IiM0NzU0NjciIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:"button-icon"}),C("Update metrics","lightweight-cookie-notice-free")))),(0,n.createElement)("div",{className:"daextlwcnf-react-table__daextlwcnf-filters daextlwcnf-react-table__daextlwcnf-filters-dashboard-menu"},(0,n.createElement)("div",{className:"daextlwcnf-search-container"},(0,n.createElement)("input",{onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),document.getElementById("daextlwcnf-search-button").click())},type:"text",placeholder:C("Filter by URL","lightweight-cookie-notice-free"),value:e.searchString,onChange:n=>t({...e,searchString:n.target.value})}),(0,n.createElement)("input",{id:"daextlwcnf-search-button",className:"daextlwcnf-btn daextlwcnf-btn-secondary",type:"submit",value:C("Search","lightweight-cookie-notice-free"),onClick:()=>t({...e,searchStringChanged:!e.searchStringChanged})}))),(0,n.createElement)(_,{data:i,handleSortingChanges:function(n){let a=e.sortingOrder;e.sortingColumn===n.target.value&&(a="asc"===e.sortingOrder?"desc":"asc"),t({...e,sortingColumn:n.target.value,sortingOrder:a})},formData:e})))))}),null);D&&(a.H?(0,a.H)(D).render(M):I(M,D))})();